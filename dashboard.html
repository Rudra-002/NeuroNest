<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeuroNest | Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="dashboard-body page-soft-bg">

<nav class="navbar">
  <h2 class="logo">NeuroNest</h2>
</nav>

<h1>Screening Insights</h1>

<div class="card">
  <p><strong>Risk Level:</strong> <span id="risk"></span></p>
  <p><strong>Score:</strong> <span id="score"></span></p>
  <p id="message"></p>
  <small id="disclaimer"></small>
</div>

<div class="card wide">
  <h3>Understanding Your Responses</h3>
  <ul id="explanationContainer"></ul>
</div>

<div class="card wide">
  <h3>What You Can Do Next</h3>
  <ul id="nextStepsList"></ul>
</div>

<script>
  const rawData = localStorage.getItem("screeningResult");

  if (!rawData) {
    document.body.innerHTML = `
      <div style="text-align:center; padding:40px;">
        <h2>No screening data found</h2>
        <p>Please complete the screening before viewing results.</p>
      </div>
    `;
  } else {
    const data = JSON.parse(rawData);

    // Core summary
    document.getElementById("risk").innerText = data.riskLevel ?? "-";
    document.getElementById("score").innerText = data.score ?? "-";
    document.getElementById("disclaimer").innerText = data.disclaimer ?? "";

    // Understanding your responses
    const observationContainer = document.getElementById("explanationContainer");
    observationContainer.innerHTML = "";

    if (data.observations && data.observations.length > 0) {
      data.observations.forEach(obs => {
        const li = document.createElement("li");
        li.innerText = obs;
        observationContainer.appendChild(li);
      });
    } else {
      // If no observations, show a message
      observationContainer.innerHTML = "<li>No specific patterns observed in this screening.</li>";
    }

    // What you can do next
    const nextStepsContainer = document.getElementById("nextStepsList");
    nextStepsContainer.innerHTML = "";

    if (data.nextSteps && data.nextSteps.length > 0) {
      data.nextSteps.forEach(step => {
        const li = document.createElement("li");
        li.innerText = step;
        nextStepsContainer.appendChild(li);
      });
    } else {
      // Fallback if no next steps
      nextStepsContainer.innerHTML = "<li>Continue monitoring development and consult a professional if needed.</li>";
    }

    /* -----------------------------
       VISUAL EMPHASIS
       (Soft, non-alarming)
    ------------------------------ */
    const riskCard = document.getElementById("riskCard");
    if (riskCard && data.riskLevel) {
      riskCard.classList.add(data.riskLevel.toLowerCase());
    }
  }
</script>

</body>
</html>
